# Synctacles Care - Home Assistant App Configuration
# https://developers.home-assistant.io/docs/add-ons/configuration

name: "Synctacles Care"
version: "0.2.1-beta"
slug: "synctacles_care"
description: "System diagnostics, cleanup, and AI-powered troubleshooting for Home Assistant"
url: "https://github.com/synctacles/care-app"
arch:
  - amd64
  - aarch64
  - armv7
init: false
startup: application
boot: auto
homeassistant_api: true
hassio_api: true
hassio_role: manager

# Docker image on GHCR (HA Supervisor replaces {arch} with amd64/aarch64/armv7)
image: "ghcr.io/synctacles/{arch}-care"

# App options
options:
  ai_api_key: ""
  notifications_enabled: true
  scheduled_scan_enabled: false
  auto_cleanup_enabled: false
  telemetry_enabled: false
  debug_mode: false

# Schema for options validation
schema:
  ai_api_key: password?
  notifications_enabled: bool
  scheduled_scan_enabled: bool
  auto_cleanup_enabled: bool
  telemetry_enabled: bool
  debug_mode: bool

# Web UI
ingress: true
ingress_port: 8080
panel_icon: mdi:hospital-box
panel_title: "Synctacles Care"

# Resource requirements
host_network: false
host_ipc: false
privileged: []
full_access: false

# Services
services:
  - mqtt:want

# Map host directories (optional, for advanced users)
map:
  - config:rw

# Environment
environment:
  SYNCTACLES_ENVIRONMENT: "production"

# Changelog
changelog: |
  ## 0.2.0-beta
  - BYOK AI: use your own Anthropic API key for AI diagnostics
  - Synctacles Radar: silent error fingerprinting (Phase 1)
  - Full environment snapshot sent with radar data
  - Auth/license dependencies removed (all features free)
  - Backend URL updated to Cloudflare Worker (api.synctacles.com)
  - Decoupled from care-backend WebSocket relay
  ## 0.1.0-beta

  - Initial beta release
  - Health scan (A-F score)
  - Security scan (0-100 score)
  - Orphan entity detection
  - Knowledge base search (17,000+ articles)
  - AI diagnostics (with user's Anthropic API key)
  - Free tier: All features unlocked
  - Privacy-focused: Optional telemetry, GDPR-compliant
